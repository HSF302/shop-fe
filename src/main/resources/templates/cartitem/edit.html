<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Sửa Sản phẩm trong Giỏ</title>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <h2 class="mb-4">Sửa Sản phẩm trong Giỏ</h2>
    <div th:if="${role != 'ADMIN' and cartItem.cart.account.id != session.account.id}">
        <div class="alert alert-danger">Bạn không có quyền sửa sản phẩm này.</div>
        <a th:href="@{/cart-items}" class="btn btn-secondary">Quay lại</a>
    </div>
    <div th:if="${role == 'ADMIN' or cartItem.cart.account.id == session.account.id}">
        <form th:action="@{|/cart-items/edit/${cartItem.id}|}" th:object="${cartItem}" method="post" class="needs-validation" novalidate>
            <div class="mb-3">
                <label for="quantity" class="form-label">Số lượng:</label>
                <input type="number" id="quantity" th:field="*{quantity}" min="1" required class="form-control"/>
            </div>
            <div class="mb-3">
                <label for="size" class="form-label">Kích thước:</label>
                <select id="size" th:field="*{size.id}" class="form-select" required>
                    <option th:each="size : ${sizes}" th:value="${size.id}" th:text="${size.name}"></option>
                </select>
            </div>
            <div class="mb-3">
                <label for="color" class="form-label">Màu sắc:</label>
                <select id="color" th:field="*{color.id}" class="form-select" required>
                    <option th:each="color : ${colors}" th:value="${color.id}" th:text="${color.name}"></option>
                </select>
            </div>
            <div class="mb-3">
                <label for="material" class="form-label">Chất liệu:</label>
                <select id="material" th:field="*{material.id}" class="form-select" required>
                    <option th:each="material : ${materials}" th:value="${material.id}" th:text="${material.name}"></option>
                </select>
            </div>
            <div class="mb-3">
                <label class="form-label">Phụ kiện:</label><br/>
                <div th:each="addon : ${addons}" class="form-check form-check-inline">
                    <input type="checkbox" th:field="*{addons}" th:value="${addon.id}" th:id="'addon-' + ${addon.id}" class="form-check-input"/>
                    <label th:for="'addon-' + ${addon.id}" th:text="${addon.name}" class="form-check-label"></label>
                </div>
            </div>
            <input type="hidden" th:field="*{cart.id}"/>
            <input type="hidden" th:field="*{product.id}"/>
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
                <a th:href="@{/cart-items}" class="btn btn-secondary">Hủy</a>
            </div>
        </form>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>